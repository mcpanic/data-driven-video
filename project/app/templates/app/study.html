{% load staticfiles %}
{% csrf_token %}

<!DOCTYPE html>
<html>
<head>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel='stylesheet' type='text/css'>
    <link href="{% static 'app/css/common.css' %}" rel='stylesheet' type='text/css'>
    <link href="{% static 'app/myplayer/style.css' %}" rel='stylesheet' type='text/css'>
    <style>
        #main {
            margin-left: 30px;
        }
        #main div {
            margin: 15px;
        }
    </style>
</head>

<body>
<div class="container">
    <div id="tabs" class="clearfix">
        <div class="brand">Welcome to the LectureScape User Study</div>
    </div>

    <div id="main">
        <div id="leftpane">
            <h2>Your Participant ID: <span id="participant-id"></span></h2>
            <div>
                In this study, you will watch 6.00x lecture videos with two types of video players and perform various tasks.
                <br/><br/>
                The experiments are designed to evaluate the usability of the interfaces, not you or your computer science knowledge, so don't worry :)
            </div>
            <div id="tasks">
            </div>
        </div>
    </div>

</div>

    <script src="{% static 'app/js/jquery-1.10.2.min.js' %}"></script>
    <script src="{% static 'app/js/common.js' %}"></script>
    <script src="{% static 'app/myplayer/Log.js' %}"></script>
    <script src="{% static 'app/myplayer/script.js' %}"></script>

    <script>
    var pid = {{pid|safe}};
    $(document).ready(function(){
        $("#participant-id").text(pid);
        Log.createTasks();
        var numTasks = 8;
        var i, task, url, videoID;
        console.log(pid, tasks);
        $("<h3/>").html("Part 0. Tutorial").appendTo($("#tasks"));
        $("<div/>")
            .html("<span class='progress'>&nbsp;&nbsp;&nbsp;</span><a target='_blank' href='" + Log.tutorialConUrl + "'>Tutorial 1</a>")
            .appendTo($("#tasks"));
        $("<div/>")
            .html("<span class='progress'>&nbsp;&nbsp;&nbsp;</span><a target='_blank' href='" + Log.tutorialExpUrl + "'>Tutorial 2</a>")
            .appendTo($("#tasks"));

        for (i = 1; i <= numTasks; i++) {
            console.log("TASK #", (pid - 1) * numTasks + i)
            task = Log.conditions[(pid - 1) * numTasks + i];
            videoID = "";
            url = "/app/player/6.00x/" + videoID +
                "?iid=" + task.iid +
                "&pid=" + task.pid +
                "&tid=" + task.tid +
                "&torder=" + task.torder +
                "&ttype=" + task.ttype;
            if (i == 1) {
                $("<h3/>").html("Part 1. Visual Search Tasks").appendTo($("#tasks"));
            } else if (i == 5) {
                $("<h3/>").html("Part 2. Problem Search Tasks").appendTo($("#tasks"));
            } else if (i == 7) {
                $("<h3/>").html("Part 3. Skimming Tasks").appendTo($("#tasks"));
            }
            $("<div/>")
                .html("<span class='progress'>&nbsp;&nbsp;&nbsp;</span><a target='_blank' href='" + url + "'>Task " + task.torder + "</a>" +
                    " " + task.iid + " " + task.pid + " " + task.tid + " " + task.torder + " " + task.ttype)
                .appendTo($("#tasks"));
        }
        $("<h3/>").html("Part 4. Wrap-up").appendTo($("#tasks"));
        $("<div/>")
            .html("<span class='progress'>&nbsp;&nbsp;&nbsp;</span><a target='_blank' href='" + Log.postQuestionnaireUrl + "'>Post Questionnaire</a>")
            .appendTo($("#tasks"));
        Log.add("study.html", "loaded", {"pid": pid});

        $("a").click(function(){
            $(this).closest("div").find(".progress").html("V&nbsp;&nbsp;");
        });
    });
    </script>

</body>
</html>
